# FAQ

#### Рабочее окружение сломалось, как быть?

В любой непонятной ситуации проще пересоздать рабочее окружение по инструкции, а не разбираться как починить разломанное.

---

#### Не потеряю ли я код, который написал в контейнере, если пересоздам контейнер?

Нет, потому что директория `/workspace` в контейнере – это отображение рабочей директории с курсом из хост-системы.

При пересоздании контейнера рабочая директория вновь примонтируется в контейнере по пути `/workspace`.

---

#### Как работать с репозиторием без подключения к интернету?

Подключение к интернету требуется для модуля `FetchContent` в CMake, с помощью которого тянутся зависимости проекта.

Раскомментируйте строчку рядом с `Offline mode` в [library/CMakeLists.txt](/library/CMakeLists.txt).

---

#### Как отключить запуск тестов в подпроцессе (например, для запуска тестов с отладчиком)?

Запустите исполняемый файл с тестами с флагами командной строки `--disable_forks` и `--disable_time_limits`.

---

#### При компиляции ворнинги считаются ошибками, как это отключить?

В промышленной разработке `-Werror` – стандарт.  Но при отладке решения задачи этот флаг может мешать. 

Выключить его можно закомментировав соответствующий `add_compile_options` в [`cmake/CompileOptions.cmake`](/cmake/CompileOptions.cmake).

---

#### В контейнере пропал интернет, при этом в хост-системе он есть, что делать?

Симптомы: сообщения вида _Could not resolve host: gitlab.com_.

Говорят, что в этой ситуации проще всего перезагрузить компьютер.

Проблема не связана с курсом, так что ответ можно гуглить в интернете.

Если `ping` внутри контейнера не может достучаться ни до одного хоста – скорее всего, проблема в DNS.
Решение [тут](https://stackoverflow.com/questions/20430371/my-docker-container-has-no-internet).

---

#### Не работает gitlab.com?

Такое случается. Проверить его статус можно здесь: https://twitter.com/gitlabstatus.

---

#### Можно ли поменять стартовую директорию для логина в контейнер?

Да!
Установите свою стартовую директорию в [docker/config/bashrc](/docker/config/bashrc), после этого `login` начнет перебрасывать вас по этому пути.

---

#### Проект курса не собирается!

Обратите внимание: сборка через Clippy и сборка через CLion работают независимо друг от друга!

##### Clippy

Попробуйте собраться начисто:

`clippy cmake --clean`, затем `clippy warmup`.

Вместо `--clean` можно стереть директорию `build` в корне репозитория курса и выполнить обычный `clippy cmake`.

##### CLion

Иногда в CLion залипает синхронизация файлов между хост-системой и контейнером. Чтобы форсировать синхронизацию, нажмите ПКМ по директории курса и в контекстном меню выберите `Deployment` > `Upload to`. 

Для пересборки проекта выполните через главное меню `Tools` > `CMake` > `Reset Cache and Reload Project`, затем запустите сборку нужной цели.

Если это не помогает, и вы видите ошибки, к которым вы не имеете отношения, то напишите в чат техподдержки.

---

#### Как установить опцию CMake при сборке?

В CLion добавьте опцию в поле `CMake Options` в нужный профиль сборки в `Preferences` > `Build, Execution, Deployment` > `CMake`.

В VScode добавьте опцию в поле `Configure Args` в меню настройки расширения `CMake Tools` (вкладка левого меню `Extensions` > значок шестерёнки у `CMake Tools` > `Extension Settings` > `Configure Args` > `Add item`)

Для Clippy используйте файл `.clippy-build-profiles.json` в корне репозитория.

---

#### Как накатить на задачу код из репозитория с решениями?

Перейдите в директорию с задачей и выполните команду `clippy apply`.

---

#### Утилита `clang-tidy` / команда `clippy tidy` генерирует тысячи ворнингов, так и должно быть?

К сожалению, да.

---

#### Как отключить проверку `clang-tidy` для конкретной строки кода?

См. [Suppressing Undesired Diagnostics](https://clang.llvm.org/extra/clang-tidy/#suppressing-undesired-diagnostics).

---

#### У меня MacBook с процессором ARM M1, код не собирается, что делать?

Нужно добавить в [`docker-compose.yml`](/docker/docker-compose.yml) в секцию `wrapper` настройку `platform: linux/x86_64`.

---

#### В VScode не работает навигация по коду, как починить?

Перезапустите `clangd`: `Ctrl+Shift+P` → `clangd: Restart language server` 

Если красные подчёркивания остались, то попробуйте перезапустить VScode.
