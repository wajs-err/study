# SmartPointers

Код, кажется, достаточно хороший, но есть несолько проблем:
1) Главная и самая серьезная -- с валгриндом код проходит не все тесты. 
Некоторые из ассертов падают с валгриндом, но работают без него. 
Все они связаны с количеством обращений к new / delete и около них стоят тудушки 
в файле с тестами.
2) SharedPtr использует делигирующий конструкторы, что плохо согласуется с безопасностью относительно исключений. 
SharedPtr(Y* ptr) и SharedPtr(Y* ptr, Deleter deleter) не обладают strong exception safety :)
3) Я не совсем понимаю, зачем / когда помечать конструкторы noexcept, поэтому они могут быть достаточно рандомно помечены.

Остальное вроде нормальное и рабочее, но не факт.

01.06.22
Дополнение спустя месяц: пофиксил деструктор одного из ControlBlock и добавил
комментарий в 53 строку кода в detail::ControlBlockPtr::destroy()
53 |    // why not std::allocator_traits<ControlBlockAllocator>::destroy(alloc, this) ?
54 |    this->~ControlBlockPtr();
потому что я теперь действительно не понимаю, почему там не так.